"use strict";var name=localStorage.getItem("username");function login(){name&&($("#top-left a").eq(0).html("欢迎你".concat(name,"!")),$("#top-left a").eq(1).html("退出"),$("#top-left a").eq(0).attr("href","http://my.xtep.com.cn/AccountManage/PersonInfo.aspx"))}function showCart(){$.ajax({url:"../interface/showlist.php",dataType:"json",success:function(n){$("#shopping ul").html(""),$.each(n.data,function(n,e){var c=e.product_price2,t=e.product_num,a=(c=c.replace("￥",""))*t;$("#shopping ul").append('\n\t\t\t<li>\n                    <input type="checkbox" class="xuanze">\n                    <img src="'.concat(e.product_img,'">\n                    <div class="box1">\n                        <a href="">').concat(e.product_id,'</a>\n                        <br/><span>颜色：橙色 尺码：3XL</span>\n                    </div>\n                    <div class="box2">\n                        <span>').concat(e.product_price1,"</span>\n                        <span>").concat(e.product_price2,'</span>\n                    </div>\n                    <div class="box3">\n                        <a href="../pages/shopping.html" class="delNum">-</a>\n                        <input type="text" value="').concat(e.product_num,'">\n                        <a href="../pages/shopping.html" class="le">+</a>\n                    </div>\n                    <span>￥').concat(a,'</span>\n                    <a href="../pages/shopping.html" class="delProduct">删除</a>\n                </li>\n\t\t\t'))})}})}function Count(){$.ajax({url:"../interface/showlist.php",dataType:"json",success:function(n){var p=0,r=0,o=0;$.each(n.data,function(n,e){var c=parseInt(e.product_num),t=e.product_price1.substring(1),a=e.product_price2.substring(1);p+=c;var i=(o+=c*t)-(r+=c*a);$(".jiesuan").children().eq(1).children().eq(0).html(p),$("#top-right").children().eq(3).children().eq(1).html("(".concat(p,")")),$(".money").children().children().eq(0).children().eq(0).html("￥".concat(r)),$(".money").children().children().eq(1).children().eq(0).html("￥".concat(i))})}})}login(),$(".cheap p").click(function(){$.ajax({url:"../interface/addwq.php",dataType:"json",data:{id:$(this).parent().children().eq(4).children().html(),img:$(this).parent().children().eq(0).children().attr("src"),price1:$(this).parent().children().eq(2).html(),price2:$(this).parent().children().eq(1).children().html(),num:"1"},success:function(n){n.code?alert("商品加入成功"):alert("商品加入失败")}})}),showCart(),$(".shopping-main ul").on("click",".delProduct",function(){var n=$(this).parent().children().eq(2).children().eq(0).html();$.ajax({url:"../interface/delwq.php",data:{id:n},dataType:"json",success:function(n){n.code&&showCart()}})}),$(".shopping-main ul").on("click",".le",function(){var n=$(this).parent().parent().children().eq(2).children().eq(0).html();$.ajax({url:"../interface/updatewq.php",dataType:"json",data:{type:"add",id:n},success:function(n){n.code&&alert("商品增加成功")}})}),$(".shopping-main ul").on("click",".delNum",function(){var n=$(this).parent().parent().children().eq(2).children().eq(0).html();$.ajax({url:"../interface/updatewq.php",dataType:"json",data:{type:"",id:n},success:function(n){n.code&&alert("商品减少成功")}})}),Count(),$(".jiesuan div input").click(function(){$(this).prop("checked")?$(".shopping-main ul li input:even").prop("checked",!0):$(".shopping-main ul li input:even").prop("checked",!1)}),$(".message input").click(function(){$(this).prop("checked")?$(".shopping-main ul li input:even").prop("checked",!0):$(".shopping-main ul li input:even").prop("checked",!1)}),$(".shopping-main ul").on("click",".xuanze",function(){$(".jiesuan div input").prop("checked",!1),$(".message input").prop("checked",!1)}),$(".jiesuan div a").click(function(){$.each($(".xuanze"),function(n,e){var c=$(e).prop("checked")?$(".xuanze").parent().children().eq(2).children().eq(0).html():"";console.log(c)}),$.ajax({url:"../interface/delwq.php",data:{id:id},dataType:"json",success:function(n){n.code&&showCart()}})});